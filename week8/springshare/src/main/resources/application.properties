
## 分库分表 配置:
spring.shardingsphere.datasource.names=data1,data2

# 数据源
spring.shardingsphere.datasource.data1.type=com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.data1.driver-class-name=com.mysql.jdbc.Driver
spring.shardingsphere.datasource.data1.url=jdbc:mysql://localhost:3306/data1?characterEncoding=utf-8&useSSL=false
spring.shardingsphere.datasource.data1.username=root
spring.shardingsphere.datasource.data1.password=root

spring.shardingsphere.datasource.data2.type=com.alibaba.druid.pool.DruidDataSource
spring.shardingsphere.datasource.data2.driver-class-name=com.mysql.jdbc.Driver
spring.shardingsphere.datasource.data2.url=jdbc:mysql://localhost:3306/data2?characterEncoding=utf-8&useSSL=false
spring.shardingsphere.datasource.data2.username=root
spring.shardingsphere.datasource.data2.password=root


### 分片策略使用的是 行表达式分片策略
## 分表配置
spring.shardingsphere.sharding.tables.t_user.actualDataNodes=springboot$->{0..1}.t_user$->{0..2}
spring.shardingsphere.sharding.tables.t_user.tableStrategy.inline.shardingColumn=id
spring.shardingsphere.sharding.tables.t_user.tableStrategy.inline.algorithmExpression=t_user$->{id % 3}
spring.shardingsphere.sharding.tables.t_user.keyGenerator.column=id
## 使用雪花算法生成分布式主键id
spring.shardingsphere.sharding.tables.t_user.keyGenerator.type=SNOWFLAKE

## 分库配置
spring.shardingsphere.sharding.default-database-strategy.inline.sharding-column=id
spring.shardingsphere.sharding.default-database-strategy.inline.algorithm-expression=data$->{id % 2}


# 不分库分表的数据源指定，使用设置的默认数据源
spring.shardingsphere.sharding.default-data-source-name=data1
# 打印执行的数据库以及语句
spring.shardingsphere.props.sql.show=true
